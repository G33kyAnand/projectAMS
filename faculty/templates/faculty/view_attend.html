<!--
	author: g33kyAnand
-->

{% load mathfilters %}
{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>NITN-AMS | Faculty Home</title>
    <link rel="stylesheet" type="text/css" href="{% static 'faculty/css/faculty-home.css' %}">
	
</head>
<body>
	<div class="ams-faculty_navbar">
		<div class="ams-navbar_logo">
			<img src="{% static 'faculty/img/nitn_logo.png' %}">
			<span> NITN-Attendance Management System</span>
		</div>

		<div class="ams-navbar_links">
			<ul>
				<a href="{% url 'faculty' %}"><li>DASHBOARD</li></a>
				<a href="{% url 'update_attend' %}"><li>UPDATE ATTENDANCE</li></a>
				<a href="{% url 'faculty_view_attend' %}"><li>VIEW ATTENDANCE</li></a>
				<a href="{% url 'faculty_logout' %}"><li> LOGOUT </li></a>
			</ul>
		</div>
	</div>

	<div class="site-container">
		<div class="option-picker">	
			<form method="POST" name="select_option_form" >
				{% csrf_token %}
				
				<select name="select_year" required onchange="this.form.submit()">
					<option value="" disabled selected>Select Year</option>
					{% for year in filters.years %}
					<option value="{{ year.value }}" {% if year.checked %} selected {% endif %}>{{ year.value }}</option>
					{% endfor %}
				</select>
				<select name="select_semester" required onchange="this.form.submit()">
					<option value="" disabled selected>Select Semester</option>
					{% for semester in filters.semesters %}
					<option value="{{ semester.value }}" {% if semester.checked %} selected {% endif %}>Semester {{ semester.value }}</option>
					{% endfor %}
				</select>
				<select name="select_course_code" id="select_course_code" required onchange="this.form.submit()">
					<option value="">Select Course Code</option>
					{% for course in filters.courses %}
					<option value="{{ course.course_code }}" {% if course.checked %} selected {% endif %}>{{ course.course_code }}</option>
					{% endfor %}
				</select>
		</form>

		</div>
	
		{% if attendance.total %}
		<div class="attendance-editor">
			<table class="attend-table">
			<form method="POST" id="attendance_form">
				{% csrf_token %}
				<input type="hidden" name="attendance_date" id="attendance_date" value="{{ filters.selected_date }}">
				<input type="hidden" name="course_code" value="{{ filters.selected_course }}">
			
				<thead>
					<th>Registration No</th>
					<th>Classes Taken</th>
					<th>Classes Present</th>
					<th>Percentage</th>
				</thead>
				<tbody>
					
						{% for student in attendance.students %}
						<tr>
							<td>{{ student.reg_no }}</td>
							<td>{{ attendance.total }}</td>
							<td>{{ student.present }}</td>
							<td> {{ student.present|div:attendance.total|mul:100 }} </td>
						</tr>
						{% endfor %}
					
				</tbody>
			</form>
		</table>
		</div>
		{% else %}
		<div>
			Select a valid course from the drop down to see the attendance.
		</div>
		{% endif %}
	</div>

<script src="{% static 'faculty/js/faculty.js' %}"></script>
</body>
</html>