<!--
	author: g33kyAnand
-->

{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>NITN-AMS | Faculty Home</title>
    <link rel="stylesheet" type="text/css" href="{% static 'faculty/css/faculty-home.css' %}">
	
</head>
<body>
	<div class="ams-faculty_navbar">
		<div class="ams-navbar_logo">
			<img src="{% static 'faculty/img/nitn_logo.png' %}">
			<span> NITN-Attendance Management System</span>
		</div>

		<div class="ams-navbar_links">
			<ul>
				<a href="{% url 'faculty' %}"><li>DASHBOARD</li></a>
				<a href="{% url 'update_attend' %}"><li>UPDATE ATTENDANCE</li></a>
				<a href="{% url 'faculty_view_attend' %}"><li>VIEW ATTENDANCE</li></a>
				<a href="{% url 'faculty_logout' %}"><li> LOGOUT </li></a>
			</ul>
		</div>
	</div>

	<div class="site-container">
		<div class="option-picker">	
			<form method="POST" name="select_option_form" >
				{% csrf_token %}
				
				<select name="select_batch" required>
					<option value="">Select Batch</option>
					{% for batch in filters.batches %}
					<option value="{{ batch.year }}" {% if batch.checked %} selected {% endif %}>{{ batch.year}}-{{ batch.year|add:"4" }}</option>
					{% endfor %}
				</select>
				<select name="select_department" required>
					<option value="">Select Department</option>
					{% for dep in filters.departments %}
					<option value="{{ dep.department }}" {% if dep.checked %} selected {% endif %}>{{ dep.department }}</option>
					{% endfor %}
				</select>
				<select name="select_course_code" id="select_course_code" required>
					<option value="">Select Course Code </option>
					{% for course in filters.courses %}
					<option value="{{ course.course_code }}" {% if course.checked %} selected {% endif %}>{{ course.course_code }}</option>
					{% endfor %}
				</select>		
			<input type="date" name="att_date" id="att_date" value="{{ filters.selected_date }}" max="{% now 'Y-m-d' %}" required>
			<button type="submit" name="att_filter_btn" id="submit_option_selector">SUBMIT</button>
		</form>

		</div>	
		{% if user_set %}
		<div class="attendance-editor">
			<table class="attend-table">
			<form method="POST" id="attendance_form">
				{% csrf_token %}
				<input type="hidden" name="attendance_date" id="attendance_date" value="{{ filters.selected_date }}">
				<input type="hidden" name="course_code" value="{{ filters.selected_course }}">
			
				<thead>
					<th>Registration No</th>
					<th>Name</th>
					<th>Attendance</th>
				</thead>
				<tbody>
					
						{% for student in user_set %}
						<tr>
							<td>{{ student.reg_no }}</td>
							<td>{{ student.name }}</td>
							<td>
								<label class="label_present">
									<input type="radio" value="P" name="reg_{{ student.reg_no }}" required/><span>P</span>
								</label>
    							<label class="label_absent">
									<input type="radio" value="A" name="reg_{{ student.reg_no }}" required/><span>A</span>
								</label>			
							</td>
						</tr>
						{% endfor %}
					
				</tbody>
			
			<button type="submit" name="att_data_submit_btn" id="att_data_submit_btn"  form="attendance_form">SUBMIT</button>
			</form>
		</table>
		</div>
		{% else %}
		<div>
			{% if messages %}
				{% for message in messages %}
					<h3>{{ message }}</h3>
				{% endfor %}
			{% endif %}
		</div>
		{% endif %}
		

	</div>

<script src="{% static 'faculty/js/faculty.js' %}"></script>
</body>
</html>